version: '3.8'

services:
  minemaster:
    build: .
    image: minemaster:latest
    container_name: minemaster
    env_file:
      - .env
    environment:
      - NODE_ENV=production
      # nginx-proxy picks up VIRTUAL_HOST and VIRTUAL_PORT from env_file (.env)
      # LETSENCRYPT_HOST and LETSENCRYPT_EMAIL are also read from .env if using acme-companion
    expose:
      - "3001"
    # Use network_mode or override network in production to match your nginx-proxy network.
    # Default: same network as nginx-proxy. Override with:
    #   docker-compose run --network <your-nginx-proxy-network> minemaster
    # Or just use the docker-deploy script which auto-detects the network.
    restart: unless-stopped
