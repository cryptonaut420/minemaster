version: '3.8'

services:
  minemaster:
    build: .
    image: minemaster:latest
    container_name: minemaster
    env_file:
      - .env
    environment:
      - NODE_ENV=production
      # nginx-proxy picks up VIRTUAL_HOST and VIRTUAL_PORT from env_file (.env)
      # LETSENCRYPT_HOST and LETSENCRYPT_EMAIL are also read from .env if using acme-companion
    expose:
      - "3001"
    networks:
      - nginx-proxy
    restart: unless-stopped

networks:
  nginx-proxy:
    external: true
